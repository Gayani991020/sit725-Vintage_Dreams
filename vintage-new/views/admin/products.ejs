<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vintage-Dreams</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div>
      <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">Vintage-Dreams</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="/admin/index">Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/all-orders">Orders</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/all-products">Products</a>
              </li>
            </ul>
            <div>
              <a class="btn btn-outline-dark" href="/login">Login/Logout</a>
            </div>
          </div>
        </div>
      </nav>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 d-flex align-items-stretch">
          <div class="card w-100 m-3" style="border: none;">
            <div class="card-body p-4">
              <div class="d-flex">
                <div class="me-auto">
                  <h5 class="card-title fw-semibold mb-4">All Products</h5>
                </div>
                <div><a href="/admin/new-product" class="btn btn-warning">Add New Product</a></div>
              </div>
              <div class="table-responsive">
                <table class="table text-nowrap table-hover mb-0 align-middle">
                  <thead class="text-dark fs-4">
                    <tr>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">#</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Name</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Category</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Sizes</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Price</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Stock</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Actions</h6>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <% if (products.length > 0) { %> <%
                    products.forEach(function(product, index) { %>
                    <tr>
                      <td class="border-bottom-0">
                        <h6 class="fw-semibold mb-0"><%= index+1 %></h6>
                      </td>
                      <td class="border-bottom-0">
                        <h6 class="fw-semibold mb-1"><%= product.name %></h6>
                      </td>
                      <td class="border-bottom-0">
                        <p class="mb-0 fw-normal">
                          <!-- Category -->
                          <% if (product.category === 1) { %> Men <% } else if
                          (product.category === 2) { %> Women <% } else { %>
                          Accessories <% } %>
                        </p>
                      </td>
                      <td class="border-bottom-0">
                        <div
                          class="d-flex flex-column align-items-center gap-2"
                        >
                          <% product.size.forEach(size => { %>
                          <span
                            class="badge bg-secondary rounded-3 fw-semibold"
                            style="font-size: 10px"
                            ><%= size %></span
                          >
                          <% }); %>
                        </div>
                      </td>
                      <td class="border-bottom-0">
                        <div class="d-flex align-items-center gap-2">
                          <div class="dropdown">
                            <button
                              class="btn btn-primary btn-sm dropdown-toggle"
                              type="button"
                              id="dropdownMenuButton1"
                              data-bs-toggle="dropdown"
                              aria-expanded="false"
                            >
                              View Prices
                            </button>
                            <ul
                              class="dropdown-menu"
                              aria-labelledby="dropdownMenuButton1"
                            >
                              <% product.price.forEach(price => { %>
                              <li class="dropdown-item">
                                <%= price.size %> : $<%= price.value %>
                              </li>
                              <% }); %>
                            </ul>
                          </div>
                        </div>
                      </td>
                      <td class="border-bottom-0">
                        <div class="d-flex align-items-center gap-2">
                          <div class="dropdown">
                            <button
                              class="btn btn-primary btn-sm dropdown-toggle"
                              type="button"
                              id="dropdownMenuButton1"
                              data-bs-toggle="dropdown"
                              aria-expanded="false"
                            >
                              View Quantity
                            </button>
                            <ul
                              class="dropdown-menu"
                              aria-labelledby="dropdownMenuButton1"
                            >
                              <% product.stockQuantity.forEach(quantity => { %>
                              <li class="dropdown-item">
                                <%= quantity.size %> : <%= quantity.value %>
                              </li>
                              <% }); %>
                            </ul>
                          </div>

                          <!-- badge to show instock or out of stock. by adding the quantity in each size -->
                          <% let totalQuantity = 0;
                          product.stockQuantity.forEach(quantity => {
                          totalQuantity += quantity.value; }); %> <% if
                          (totalQuantity > 0) { %>
                          <span
                            class="badge bg-success rounded-3 fw-semibold"
                            style="font-size: 10px"
                            >In Stock</span
                          >
                          <% } else { %>
                          <span
                            class="badge bg-danger rounded-3 fw-semibold"
                            style="font-size: 10px"
                            >Out of Stock</span
                          >
                          <% } %>
                        </div>
                      </td>
                      <td class="border-bottom-0">
                        <div class="dropdown">
                          <button
                            class="btn btn-dark dropdown-toggle"
                            type="button"
                            id="dropdownMenuButton1"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                          >
                            <i class="ti ti-pencil"></i>
                          </button>
                          <ul
                            class="dropdown-menu"
                            aria-labelledby="dropdownMenuButton1"
                          >
                            <li>
                              <a class="dropdown-item" href="#">View</a>
                            </li>
                            <li>
                              <a class="dropdown-item" href="#">Edit</a>
                            </li>
                            <li>
                              <a class="dropdown-item text-danger" href="#"
                                >Delete</a
                              >
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <% }) %> <% } else { %>
                    <tr>
                      <td colspan="5" class="text-center">
                        <h6 class="fw-semibold mb-0">No products found</h6>
                      </td>
                    </tr>
                    <% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="../assets/jquery.min.js"></script>
    <script src="../assets/sweetalert2@11.js"></script>
    <script></script>
  </body>
</html>
